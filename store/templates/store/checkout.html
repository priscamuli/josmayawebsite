{% extends 'store/base.html' %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-6">

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}

            <div class="card shadow-sm p-4">
                <h3 class="mb-3 text-center">Checkout</h3>

                <p class="lead text-center">
                    <strong>Total:</strong> KES {{ total }}
                </p>

                <form method="POST">
                    {% csrf_token %}

                    <!-- DELIVERY LOCATION -->
                    <div class="mb-3">
                        <label for="location" class="form-label">Delivery Location</label>
                        <textarea 
                            id="location" 
                            name="location" 
                            class="form-control" 
                            placeholder="e.g. Nairobi,Karen"
                            required
                        ></textarea>
                    </div>

                    <!-- NOTIFICATION PHONE NUMBER -->
                    <div class="mb-3">
                        <label for="notify_phone" class="form-label">Notification Phone Number</label>
                        <input 
                            type="text"
                            id="notify_phone"
                            name="notify_phone"
                            class="form-control"
                            placeholder="0712345678"
                            pattern="^0\d{9}$"
                            required
                        >
                        <small class="text-muted">
                            This number will receive SMS updates about your order.
                        </small>
                    </div>

                    <!-- M-Pesa Phone Number -->
                    <div class="mb-3">
                        <label for="phone" class="form-label">M-Pesa Phone Number</label>
                        <input 
                            type="text" 
                            id="phone" 
                            name="phone" 
                            class="form-control" 
                            placeholder="0712345678" 
                            pattern="^0\d{9}$"
                            required
                        >
                        <small class="text-muted">
                            Enter the Safaricom number that will receive the STK Push.
                        </small>
                    </div>

                    <button type="submit" class="btn btn-success w-100">
                        Pay Now with M-Pesa
                    </button>
                </form>
            </div>

        </div>
    </div>
</div>
{% endblock %}
